<!DOCTYPE html>
<html
  lang="eng"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
  xmlns:th="http://www.thymeleaf.org"
>
  <head>
    <!--/*/ <th:block th:include="fragments/head :: head"></th:block> /*/-->
    <title>Profile</title>
  </head>
  <link rel="stylesheet" th:href="@{/css/profile.css}" />
  <body>
    <header>
      <!--/*/ <th:block th:include="fragments/header :: header('profile')"></th:block> /*/-->
  </header>
    <!-- Sidenav -->
    <div class="sidenav">
      <div class="profile">
        <img
          src="https://imdezcode.files.wordpress.com/2020/02/imdezcode-logo.png"
          alt=""
          width="100"
          height="100"
        />

        <div class="name" th:text="${user.name}"></div>
        <div class="job" th:text="${user.email}"></div>
      </div>

      <div class="sidenav-url">
        <div class="url">
          <a href="#profile" class="active">Profile</a>
          <hr align="center" />
        </div>
      </div>
    </div>
    <!-- End -->

    <!-- Main -->
    <div class="main">
      <h2>IDENTITY</h2>
      <div class="card">
        <div class="card-body">
          <i class="fa fa-pen fa-xs edit"></i>
          <table>
            <tbody>
              <tr>
                <td>Name</td>
                <td>:</td>
                <td th:text="${user.name}"></td>
              </tr>
              <tr>
                <td>Email</td>
                <td>:</td>
                <td th:text="${user.email}"></td>
              </tr>
              <tr>
                <td>Company</td>
                <td>:</td>
                <td>Torry Harris Integration Solutions</td>
              </tr>
              <tr>
                <td>Total Tasks</td>
                <td>:</td>
                <td th:text="${#lists.size(tasksOwned)}"></td>
              </tr>
              <tr>
                <td>Task Completed</td>
                <td>:</td>
                <td th:text="${#lists.size(tasksOwned.?[completed])}"></td>
              </tr>
              <tr>
                <td>Task Yet to Complete</td>
                <td>:</td>
                <td th:text="${#lists.size(tasksOwned.?[not completed])}"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="my-container">
      <h5 class="heading" th:text="${user.name}+' Task List:'">T</h5>
      <table
        id="example"
        class="table table-striped table-bordered"
        cellspacing="0"
        width="97%"
      >
        <thead>
          <tr>
            <th>Task Name</th>
            <th>Description</th>
            <th>Date</th>
            <th>Days Left</th>
            <th>Completed</th>
            <th style="text-align: center">Info</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="t : ${tasksOwned}">
            <td class="text-left" th:text="${t.name}"></td>
            <td
              class="text-left d-none d-sm-table-cell"
              th:text="${t.description}"
            ></td>

            <td th:text="${#temporals.format(t.date, 'dd-MM-yyyy')}"></td>

            <!--Days left-->
            <td class="text-center col-1">
              <!--/*/ <th:block th:include="fragments/days-left-until-deadline :: daysLeft(${t})"></th:block> /*/-->
            </td>

            <!--Completed/In progress-->
            <td>
              <a
                th:href="${t.completed} ? ${'/profile/unmark-done/' + t.id} : ${'/profile/mark-done/' + t.id}"
                th:class="${t.owner==null} ? 'disabled nav-link my-link' : 'nav-link my-link'"
                ><i
                  th:class="${t.completed} ? 'far fa-check-square my-check':'far fa-square my-check'"
                ></i>
              </a>
            </td>

            <td>
              <button class="info-button"><img class="infoimg" src="/images/icons8-info.svg" alt=""></button>
            </td>
          </tr>

          <tr th:if="${user.tasksOwned.size()==0}">
            <td
              colspan="5"
              th:text="${'There are no tasks assigned to '+ user.name}"
            ></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!--remain scroll position after redirect-->
    <script src="js/main.js"></script>
    <script th:src="@{/js/profile.js}"></script>
  </body>
</html>
